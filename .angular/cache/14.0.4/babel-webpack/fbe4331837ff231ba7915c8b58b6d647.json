{"ast":null,"code":"import { nextSelector, prevSelector, selectAnime, selectLoading } from \"../anime.selector\";\nimport { loadAnime } from \"./anime.actions\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\n\nfunction AnimePageComponent_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function AnimePageComponent_button_6_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.nextPage());\n    });\n    i0.ɵɵtext(1, \"Next\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AnimePageComponent_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function AnimePageComponent_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.prevPage());\n    });\n    i0.ɵɵtext(1, \" Previous \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AnimePageComponent_div_10_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\")(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵelementStart(9, \"span\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const anime_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(anime_r8.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(anime_r8.synopsis);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"No. of episodes: \", anime_r8.episodes, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", anime_r8.rating, \" \");\n  }\n}\n\nfunction AnimePageComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, AnimePageComponent_div_10_div_1_Template, 11, 4, \"div\", 5);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(2, 1, ctx_r2.anime$));\n  }\n}\n\nexport class AnimePageComponent {\n  constructor(store) {\n    this.store = store;\n    this.anime$ = this.store.select(selectAnime);\n    this.prvs = 0;\n    this.nxt = 0;\n    this.title = \"\";\n    this.prev$ = this.store.select(prevSelector);\n    this.next$ = this.store.select(nextSelector);\n    this.loading$ = this.store.select(selectLoading);\n    this.store.dispatch(loadAnime({\n      input: \"\",\n      page: 0\n    }));\n    this.prev$.subscribe(data => {\n      this.prvs = data;\n    });\n    this.next$.subscribe(data => {\n      this.nxt = data;\n    });\n  }\n\n  prevPage() {\n    this.store.dispatch(loadAnime({\n      input: this.title,\n      page: this.prvs\n    }));\n  }\n\n  nextPage() {\n    this.store.dispatch(loadAnime({\n      input: this.title,\n      page: this.nxt\n    }));\n  }\n\n  search() {\n    this.store.dispatch(loadAnime({\n      input: this.title,\n      page: 0\n    }));\n  }\n\n}\n\nAnimePageComponent.ɵfac = function AnimePageComponent_Factory(t) {\n  return new (t || AnimePageComponent)(i0.ɵɵdirectiveInject(i1.Store));\n};\n\nAnimePageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AnimePageComponent,\n  selectors: [[\"app-anime\"]],\n  decls: 12,\n  vars: 10,\n  consts: [[3, \"submit\"], [\"type\", \"text\", \"name\", \"title\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", 3, \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [\"type\", \"button\", 3, \"click\"], [4, \"ngFor\", \"ngForOf\"]],\n  template: function AnimePageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"form\", 0);\n      i0.ɵɵlistener(\"submit\", function AnimePageComponent_Template_form_submit_1_listener() {\n        return ctx.search();\n      });\n      i0.ɵɵtext(2, \" Titulo: \");\n      i0.ɵɵelementStart(3, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function AnimePageComponent_Template_input_ngModelChange_3_listener($event) {\n        return ctx.title = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"button\");\n      i0.ɵɵtext(5, \"Find\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(6, AnimePageComponent_button_6_Template, 2, 0, \"button\", 2);\n      i0.ɵɵpipe(7, \"async\");\n      i0.ɵɵtemplate(8, AnimePageComponent_button_8_Template, 2, 0, \"button\", 2);\n      i0.ɵɵpipe(9, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(10, AnimePageComponent_div_10_Template, 3, 3, \"div\", 3);\n      i0.ɵɵpipe(11, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.title);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(7, 4, ctx.next$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(9, 6, ctx.prev$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !i0.ɵɵpipeBind1(11, 8, ctx.loading$));\n    }\n  },\n  dependencies: [i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.NgModel, i2.NgForm, i3.NgForOf, i3.NgIf, i3.AsyncPipe],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"AAGA,SACEA,YADF,EAEEC,YAFF,EAGEC,WAHF,EAIEC,aAJF,QAKO,mBALP;AAMA,SAASC,SAAT,QAA0B,iBAA1B;;;;;;;;;;ICHEC;IAA4CA;MAAAA;MAAA;MAAA,OAASA,iCAAT;IAAmB,CAAnB;IAAqBA;IAAIA;;;;;;;;IACrEA;IAA4CA;MAAAA;MAAA;MAAA,OAASA,iCAAT;IAAmB,CAAnB;IAC1CA;IACFA;;;;;;IAIAA,4BAA0C,CAA1C,EAA0C,IAA1C;IACMA;IAAiBA;IACrBA;IAAGA;IAAoBA;IACvBA,4BAAK,CAAL,EAAK,MAAL;IACQA;IAAsCA;IAAOA;IACnDA;IAAMA;IAAmBA;;;;;IAJvBA;IAAAA;IACDA;IAAAA;IAEKA;IAAAA;IACAA;IAAAA;;;;;;IANZA;IACEA;;IAQFA;;;;;IARyBA;IAAAA;;;;ADGzB,OAAM,MAAOC,kBAAP,CAAyB;EAS7BC,YAAoBC,KAApB,EAAgC;IAAZ;IARX,cAA8B,KAAKA,KAAL,CAAWC,MAAX,CAAkBP,WAAlB,CAA9B;IACT,YAAO,CAAP;IACA,WAAM,CAAN;IACA,aAAgB,EAAhB;IACS,aAAmC,KAAKM,KAAL,CAAWC,MAAX,CAAkBR,YAAlB,CAAnC;IACA,aAAmC,KAAKO,KAAL,CAAWC,MAAX,CAAkBT,YAAlB,CAAnC;IACA,gBAAgC,KAAKQ,KAAL,CAAWC,MAAX,CAAkBN,aAAlB,CAAhC;IAGP,KAAKK,KAAL,CAAWE,QAAX,CAAoBN,SAAS,CAAC;MAAEO,KAAK,EAAE,EAAT;MAAaC,IAAI,EAAE;IAAnB,CAAD,CAA7B;IACA,KAAKC,KAAL,CAAWC,SAAX,CAAsBC,IAAD,IAAc;MACjC,KAAKC,IAAL,GAAYD,IAAZ;IACD,CAFD;IAGA,KAAKE,KAAL,CAAWH,SAAX,CAAsBC,IAAD,IAAc;MACjC,KAAKG,GAAL,GAAWH,IAAX;IACD,CAFD;EAGD;;EAEDI,QAAQ;IACN,KAAKX,KAAL,CAAWE,QAAX,CAAoBN,SAAS,CAAC;MAAEO,KAAK,EAAE,KAAKS,KAAd;MAAqBR,IAAI,EAAE,KAAKI;IAAhC,CAAD,CAA7B;EACD;;EAEDK,QAAQ;IACN,KAAKb,KAAL,CAAWE,QAAX,CAAoBN,SAAS,CAAC;MAAEO,KAAK,EAAE,KAAKS,KAAd;MAAqBR,IAAI,EAAE,KAAKM;IAAhC,CAAD,CAA7B;EACD;;EAEDI,MAAM;IACJ,KAAKd,KAAL,CAAWE,QAAX,CAAoBN,SAAS,CAAC;MAAEO,KAAK,EAAE,KAAKS,KAAd;MAAqBR,IAAI,EAAE;IAA3B,CAAD,CAA7B;EACD;;AA7B4B;;;mBAAlBN,oBAAkBD;AAAA;;;QAAlBC;EAAkBiB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MChB/BtB,4BAAK,CAAL,EAAK,MAAL,EAAK,CAAL;MACQA;QAAA,OAAUuB,YAAV;MAAkB,CAAlB;MACJvB;MAAQA;MAAmBA;QAAA;MAAA;MAAnBA;MACRA;MAAQA;MAAIA;MAGdA;;MACAA;;MAGFA;MAEAA;;;;;MAV+BA;MAAAA;MAIpBA;MAAAA;MACAA;MAAAA;MAKLA;MAAAA","names":["nextSelector","prevSelector","selectAnime","selectLoading","loadAnime","i0","AnimePageComponent","constructor","store","select","dispatch","input","page","prev$","subscribe","data","prvs","next$","nxt","prevPage","title","nextPage","search","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\EDAMAMA\\Desktop\\NgRx-simple-API-call\\src\\app\\anime-search\\anime.component.ts","C:\\Users\\EDAMAMA\\Desktop\\NgRx-simple-API-call\\src\\app\\anime-search\\anime.component.html"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\r\nimport { Store } from \"@ngrx/store\";\r\nimport { Observable } from \"rxjs\";\r\nimport {\r\n  nextSelector,\r\n  prevSelector,\r\n  selectAnime,\r\n  selectLoading,\r\n} from \"../anime.selector\";\r\nimport { loadAnime } from \"./anime.actions\";\r\nimport { Anime } from \"./anime.state\";\r\n\r\n@Component({\r\n  selector: \"app-anime\",\r\n  templateUrl: \"./anime.component.html\",\r\n})\r\nexport class AnimePageComponent {\r\n  readonly anime$: Observable<Anime[]> = this.store.select(selectAnime);\r\n  prvs = 0;\r\n  nxt = 0;\r\n  title: string = \"\";\r\n  readonly prev$: Observable<number | null> = this.store.select(prevSelector);\r\n  readonly next$: Observable<number | null> = this.store.select(nextSelector);\r\n  readonly loading$: Observable<boolean> = this.store.select(selectLoading);\r\n\r\n  constructor(private store: Store) {\r\n    this.store.dispatch(loadAnime({ input: \"\", page: 0 }));\r\n    this.prev$.subscribe((data: any) => {\r\n      this.prvs = data;\r\n    });\r\n    this.next$.subscribe((data: any) => {\r\n      this.nxt = data;\r\n    });\r\n  }\r\n\r\n  prevPage() {\r\n    this.store.dispatch(loadAnime({ input: this.title, page: this.prvs }));\r\n  }\r\n\r\n  nextPage() {\r\n    this.store.dispatch(loadAnime({ input: this.title, page: this.nxt }));\r\n  }\r\n\r\n  search(): void {\r\n    this.store.dispatch(loadAnime({ input: this.title, page: 0 }));\r\n  }\r\n}\r\n","<div>\r\n  <form (submit)=\"search()\">\r\n    Titulo: <input type=\"text\" [(ngModel)]=\"title\" name=\"title\" />\r\n    <button>Find</button>\r\n  </form>\r\n\r\n  <button *ngIf=\"next$ | async\" type=\"button\" (click)=\"nextPage()\">Next</button>\r\n  <button *ngIf=\"prev$ | async\" type=\"button\" (click)=\"prevPage()\">\r\n    Previous\r\n  </button>\r\n</div>\r\n\r\n<div *ngIf=\"!(loading$ | async)\">\r\n  <div *ngFor=\"let anime of anime$ | async\">\r\n    <h3>{{ anime.title }}</h3>\r\n    <p>{{ anime.synopsis }}</p>\r\n    <div>\r\n      <span>No. of episodes: {{ anime.episodes }} </span><br />\r\n      <span>{{ anime.rating }} </span>\r\n    </div>\r\n  </div>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module"}